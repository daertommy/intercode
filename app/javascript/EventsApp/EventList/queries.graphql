#import "../queries.graphql"
#import "../../Models/commonFormFragments.graphql"

query EventListEventsQuery($page: Int, $pageSize: Int, $filters: EventFiltersInput, $sort: [SortInput!]) {
  currentAbility {
    can_read_schedule
  }

  convention: conventionByRequestHost {
    id

    events_paginated(page: $page, per_page: $pageSize, filters: $filters, sort: $sort) {
      total_entries
      total_pages
      current_page
      per_page

      entries {
        id
        title
        created_at
        short_blurb_html
        form_response_attrs_json_with_rendered_markdown
        my_rating

        event_category {
          id
          name
          team_member_name
          teamMemberNamePlural

          event_form {
            id
            form_sections {
              id
              form_items {
                id
                public_description
                default_value
                ...CommonFormItemFields
              }
            }
          }
        }

        runs {
          id
          starts_at
        }

        team_members {
          id
          display_team_member

          user_con_profile {
            id
            last_name
            name_without_nickname
            gravatar_enabled
            gravatar_url
          }
        }
      }
    }
  }
}
